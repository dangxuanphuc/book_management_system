<ol class="breadcrumb text-left">
  <li class="active">
    <%= link_to t(".link1"), admin_books_path %><%= t "admin.link" %>
    <%= link_to t(".link2"), new_admin_book_path(@book) %>
  </li>
</ol>
<h1 class="section-title title" id="services">
  <span><%= t ".page_title" %></span>
</h1>
<div class="pmd-card pmd-z-depth pmd-card-custom-form col-xs-12" data-turbolinks="false">
  <div class="col-xs-12">
    <div class="col-xs-4">
      <img src="<%= @book.images.first.try :url %>" class="book-image">
      <div class="image-others">
        <div class="owl-carousel owl-theme">
          <% @book.images.each do |image| %>
            <img src="<%= image.try :url %>" class="book-image-others">
          <% end %>
        </div>
      </div>
    </div>
    <table class="col-xs-7 col-xs-offset-1 book-info">
      <tbody>
        <tr>
          <td class="text-uppercase"><b><%= t ".title" %></b></td>
          <td><%= @book.title %></td>
        </tr>
        <tr>
          <td class="text-uppercase"><b><%= t ".publisher" %></b></td>
          <td><%= @book.publisher.try :name %></td>
        </tr>
        <tr>
          <td class="text-uppercase"><b><%= t ".weight" %></b></td>
          <td><%= @book.weight %></td>
        </tr>
        <tr>
          <td class="text-uppercase"><b><%= t ".isbn" %></b></td>
          <td>
            <%= @book.isbn %>
          </td>
        </tr>
        <tr>
          <td class="text-uppercase"><b><%= t ".categories" %></b></td>
          <td>
            <% @book.categories.each do |cate| %>
              <%= cate.try :title %>.
            <% end %>
          </td>
        </tr>
        <tr>
          <td class="text-uppercase"><b><%= t ".author" %></b></td>
          <td>
            <% @book.authors.each do |author| %>
              <%= link_to_if author.present?, author.name,
                admin_author_path(author) %>.
            <% end %>
          </td>
        </tr><br>
        <tr>
          <td></td>
          <td class="col-xs-12 pull-right">
            <%= link_to t(".edit_book"), edit_admin_book_path(@book),
              method: :get, class: "btn btn-success btn-lg col-xs-3" %>
            <%= link_to t(".delete_book"), admin_book_path(@book), method: :delete,
              data: {confirm: t("button.delete_warning")},
              class: "btn btn-danger btn-lg col-xs-3"%>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <div class="col-xs-12">
    <h1>LIST BOOK ITEMS</h1>
    <div id="items-list-view">
      <div class="table-responsive" id="items-list">
        <table class="table table-bordered default-dg-table">
          <tr>
            <th><%= t ".id" %></th>
            <th><%= t ".state" %></th>
            <th><%= t ".location" %></th>
            <th><%= t ".description" %></th>
            <th><%= t ".option" %></th>
          </tr>
          <% @book.book_items.each do |book_item| %>
            <tr>
              <td><%= book_item.try :id %></td>
              <td class="item-state<%= book_item.id %>">
                <%= book_item.try :state %>
              </td>
              <td class="item-location<%= book_item.id %>">
                <%= book_item.try :location %>
              </td>
              <td class="item-description<%= book_item.id %>">
                <%= book_item.try :description %>
              </td>
              <td>
                <%= link_to "#", data: {toggle: "modal",
                  target: "#modal-edit-book-item-#{book_item.id}"},
                  class: "btn btn-primary" do %>
                  <i class="fa fa-cog fa-lg" aria-hidden="true"></i>
                <% end %>
                <div class="modal fade"
                  id="modal-edit-book-item-<%= book_item.id %>"
                  role="dialog">
                  <div class="modal-dialog category-modal-dialog">
                    <%= render "modal_book_item", book: @book,
                      book_item: book_item, supports: @supports %>
                  </div>
                </div>
                <%= link_to admin_book_book_item_path(@book, book_item.id),
                  class: "btn btn-danger",
                  method: :delete, data: {confirm: t("button.delete_warning")} do %>
                  <i class="fa fa-trash fa-lg delete-book" aria-hidden="true"></i>
                <% end %>
              </td>
            </tr>
          <% end %>
        </table>
      </div>
    </div>
    <div class="text-center">
      <%= link_to t(".create_items"), new_admin_book_book_item_path(@book),
        class:"btn btn-primary" %>
    </div>
  </div>
</div>
